{"mappings":"MAAA,MAAMA,EAAY,KAEZC,EAAiB,CACrB,IACA,UACA,QAGFC,KAAKC,iBAAiB,WAAWC,IAC/BA,EAAMC,UACJC,OAAOC,KAAKP,GAAWQ,MAAKC,GACnBA,EAAMC,OAAOT,SAK1BC,KAAKC,iBAAiB,YAAYC,IAErBA,EAALC,UACJC,OAAOK,OAAOH,MAAKI,GACVC,QAAQC,IACbF,EAAQG,KAAIC,IACV,GAAIA,IAAQhB,EACV,OAAOS,MAAMQ,OAAOD,aAQhCd,KAAKC,iBAAiB,SAASC,IAKF,QAAzBA,EAAMc,QAAQC,QACoC,IAAlDf,EAAMc,QAAQE,IAAIC,QAAQ,qBAC1BjB,EAAMc,QAAQE,IAAIE,SAAS,aAO7BlB,EAAMmB,YACJC,MAAMpB,EAAMc,SACTV,MAAKiB,GAEAA,EAASC,GACJpB,OACJC,KAAKP,GACLQ,MAAKC,GACJA,EAAMkB,IAAIvB,EAAMc,QAASO,GAAUjB,MAAK,IAAMiB,EAASG,YAGpDtB,OAAOuB,MAAMzB,EAAMc,QAAS,CAAEY,cAAc,MAGtDC,OAAM,IAAMzB,OAAOuB,MAAMzB,EAAMc,QAAS,CAAEY,cAAc","sources":["src/sw.js"],"sourcesContent":["const cacheName = 'v0';\r\n\r\nconst includeToCache = [\r\n  '/',\r\n  '/App.js',\r\n  '/img'\r\n];\r\n\r\nself.addEventListener('install', event => {\r\n  event.waitUntil(\r\n    caches.open(cacheName).then(cache => {\r\n      return cache.addAll(includeToCache);\r\n    })\r\n  );\r\n});\r\n\r\nself.addEventListener('activate', event => {\r\n//   console.log('Активирован');\r\n  event.waitUntil(\r\n    caches.keys().then(keyList => {\r\n      return Promise.all(\r\n        keyList.map(key => {\r\n          if (key !== cacheName) {\r\n            return cache.delete(key);\r\n          }\r\n        })\r\n      );\r\n    })\r\n  );\r\n});\r\n\r\nself.addEventListener('fetch', event => {\r\n//   console.log(\r\n//     `Происходит запрос на сервер ${event.request.method} ${event.request.url} `\r\n//   );\r\n  if (\r\n    event.request.method !== 'GET' ||\r\n    event.request.url.indexOf('chrome-extension') === 0 ||\r\n    event.request.url.includes('imageban')\r\n  ) {\r\n    return;\r\n  }\r\n\r\n//   console.log(event.request);\r\n\r\n  event.respondWith(\r\n    fetch(event.request)\r\n      .then(response => {\r\n        // console.log(response);\r\n        if (response.ok) {\r\n          return caches\r\n            .open(cacheName)\r\n            .then(cache =>\r\n              cache.put(event.request, response).then(() => response.clone())\r\n            );\r\n        } else {\r\n          return caches.match(event.request, { ignoreSearch: true });\r\n        }\r\n      })\r\n      .catch(() => caches.match(event.request, { ignoreSearch: true }))\r\n  );\r\n});\r\n"],"names":["$be54d8e7a0d8ad61$var$cacheName","$be54d8e7a0d8ad61$var$includeToCache","self","addEventListener","event","waitUntil","caches","open","then","cache","addAll","keys","keyList","Promise","all","map","key","delete","request","method","url","indexOf","includes","respondWith","fetch","response","ok","put","clone","match","ignoreSearch","catch"],"version":3,"file":"sw.js.map"}